---
// src/components/Header.astro
---

<!-- Background matcher -->
<div class="fixed top-0 left-0 right-0 h-16 bg-seasalt dark:bg-night -z-10"></div>

<!-- Floating header -->
<header class="sticky top-4 z-50 w-full">
  <div class="max-w-[96vw] mx-auto px-4">
    <nav class="flex items-center justify-between h-full w-full py-2 px-4 rounded-xl bg-white/80 dark:bg-gunmetal/80 backdrop-blur-md border border-gray-200/50 dark:border-gray-700/30 shadow-lg hover:shadow-xl transition-shadow">
      <!-- Logo -->
      <a href="/" class="text-xl font-heading text-racing dark:text-seasalt font-bold tracking-wider hover:text-seagreen dark:hover:text-seagreen transition-colors">
        JRAF.w
      </a>

      <!-- Desktop Navigation + CTA -->
      <div class="hidden md:flex items-center gap-8">
        <div class="flex gap-6">
          <a class="text-racing dark:text-seasalt hover:text-seagreen text-sm font-medium transition-colors py-2 hover:bg-white/30 dark:hover:bg-gunmetal/50 px-3 rounded-lg" href="#services">Services</a>
          <a class="text-racing dark:text-seasalt hover:text-seagreen text-sm font-medium transition-colors py-2 hover:bg-white/30 dark:hover:bg-gunmetal/50 px-3 rounded-lg" href="#about">About</a>
        </div>
        
        <a 
          href="#contact" 
          class="inline-flex items-center gap-2 py-2 px-4 bg-racing hover:bg-seagreen text-seasalt font-medium text-sm rounded-lg transition-all duration-300 hover:shadow-md"
        >
          Get in Touch
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </a>
      </div>

      <!-- Mobile Menu Toggle -->
      <button
        id="mobile-menu-toggle"
        class="md:hidden size-9 flex justify-center items-center rounded-lg bg-white/30 dark:bg-gunmetal/50 text-racing dark:text-seasalt hover:bg-white/50 dark:hover:bg-gunmetal/70 transition-colors"
        aria-expanded="false"
        aria-controls="mobile-menu"
        aria-label="Toggle navigation"
      >
        <svg class="hamburger-icon size-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg class="close-icon hidden size-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </nav>

    <!-- Mobile Menu -->
    <div 
      id="mobile-menu" 
      class="hidden md:hidden absolute top-full left-4 right-4 mt-2 py-3 px-4 bg-white/90 dark:bg-gunmetal/90 backdrop-blur-md rounded-xl shadow-xl border border-gray-200/50 dark:border-gray-700/30 transition-all duration-300"
    >
      <div class="flex flex-col gap-1">
        <a class="px-3 py-2 text-racing dark:text-seasalt hover:bg-white/30 dark:hover:bg-gunmetal/50 rounded-lg transition-colors" href="/">Home</a>
        <a class="px-3 py-2 text-racing dark:text-seasalt hover:bg-white/30 dark:hover:bg-gunmetal/50 rounded-lg transition-colors" href="#services">Services</a>
        <a class="px-3 py-2 text-racing dark:text-seasalt hover:bg-white/30 dark:hover:bg-gunmetal/50 rounded-lg transition-colors" href="#about">About</a>
        <a 
          class="mt-2 px-3 py-2 bg-racing hover:bg-seagreen text-seasalt text-center rounded-lg transition-all hover:shadow-md" 
          href="#contact"
        >
          Contact
        </a>
      </div>
    </div>
  </div>
</header>

<script is:inline>
document.addEventListener('DOMContentLoaded', () => {
  const toggle = document.getElementById('mobile-menu-toggle');
  const menu = document.getElementById('mobile-menu');
  const hamburger = document.querySelector('.hamburger-icon');
  const close = document.querySelector('.close-icon');

  if (toggle && menu) {
    toggle.addEventListener('click', () => {
      const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
      
      menu.classList.toggle('hidden');
      hamburger.classList.toggle('hidden');
      close.classList.toggle('hidden');
      
      toggle.setAttribute('aria-expanded', String(!isExpanded));
    });

    menu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        menu.classList.add('hidden');
        hamburger.classList.remove('hidden');
        close.classList.add('hidden');
        toggle.setAttribute('aria-expanded', 'false');
      });
    });
  }
});
</script>